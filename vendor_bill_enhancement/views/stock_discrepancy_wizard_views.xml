<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Vendor Bill Stock Discrepancy Resolution Wizard -->
    <record id="view_vendor_bill_stock_discrepancy_wizard" model="ir.ui.view">
        <field name="name">vendor.bill.stock.discrepancy.wizard.form</field>
        <field name="model">vendor.bill.stock.discrepancy.wizard</field>
        <field name="arch" type="xml">
            <form string="Resolve Stock Discrepancy">

                <div class="alert alert-warning" role="alert">
                    <h4>⚠️ Stock Discrepancy Resolution</h4>
                    <p>This wizard helps you resolve stock discrepancies for vendor bill
                    <strong><field name="vendor_bill_id" readonly="1" nolabel="1"/></strong></p>
                </div>

                <group>
                    <group string="Discrepancy Information">
                        <field name="discrepancy_details" widget="text" nolabel="1" readonly="1"/>
                    </group>

                    <group string="Resolution Options">
                        <field name="resolution_action" widget="radio"/>

                        <div class="alert alert-info" invisible="resolution_action != 'revert_all'">
                            <strong>Revert All Stock Moves:</strong> This will create return pickings for ALL
                            stock movements created from this vendor bill and reset the stock processing flags.
                        </div>

                        <div class="alert alert-info" invisible="resolution_action != 'revert_last'">
                            <strong>Revert Only Last Stock Moves:</strong> This will create return pickings for
                            only the MOST RECENT stock movements created from this vendor bill.
                        </div>

                        <div class="alert alert-info" invisible="resolution_action != 'manual_adjust'">
                            <strong>Manual Inventory Adjustment:</strong> This will open an inventory adjustment
                            form where you can manually correct the stock levels.
                        </div>

                        <div class="alert alert-info" invisible="resolution_action != 'ignore'">
                            <strong>Mark as Resolved:</strong> This will clear the discrepancy flag without
                            taking any corrective action. Use only if you've manually resolved the issue.
                        </div>
                    </group>
                </group>

                <group>
                    <group string="Confirmation">
                        <label for="confirmation_text" string="Type 'CONFIRM' to proceed:"/>
                        <field name="confirmation_text" placeholder="CONFIRM" nolabel="1"/>
                    </group>
                </group>

                <footer>
                    <button string="Resolve Discrepancy"
                            name="action_resolve_discrepancy"
                            type="object"
                            class="btn-primary"/>

                    <button string="View Stock Moves"
                            name="action_view_stock_moves"
                            type="object"
                            class="btn-secondary"
                            invisible="not show_stock_moves"/>

                    <button string="Cancel" class="btn-secondary" special="cancel"/>
                </footer>

                <!-- Hidden fields for computations -->
                <field name="show_stock_moves" invisible="1"/>

            </form>
        </field>
    </record>

</odoo>